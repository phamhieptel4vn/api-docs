"use strict";(self.webpackChunkapi_docs=self.webpackChunkapi_docs||[]).push([[9206],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var u=a.createContext({}),p=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,u=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(n),m=l,g=d["".concat(u,".").concat(m)]||d[m]||k[m]||r;return n?a.createElement(g,i(i({ref:t},c),{},{components:n})):a.createElement(g,i({ref:t},c))}));function g(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=m;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o[d]="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},69776:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>k,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(87462),l=(n(67294),n(3905));const r={title:"Event",sidebar_position:9},i=void 0,o={unversionedId:"event",id:"event",title:"Event",description:"Get Events",source:"@site/callcenter/event.md",sourceDirName:".",slug:"/event",permalink:"/callcenter/event",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"Event",sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Carrier",permalink:"/callcenter/carrier"},next:{title:"User",permalink:"/callcenter/user"}},u={},p=[{value:"Get Events",id:"get-events",level:2},{value:"HTTP Request",id:"http-request",level:3},{value:"Create Events",id:"create-events",level:2},{value:"HTTP Request",id:"http-request-1",level:3},{value:"Body",id:"body",level:3},{value:"SIP Call Event",id:"sip-call-event",level:3},{value:"Delete Event",id:"delete-event",level:2},{value:"HTTP Request",id:"http-request-2",level:3},{value:"URL Parameters",id:"url-parameters",level:3},{value:"Event Hook Data",id:"event-hook-data",level:2},{value:"M\xf4 t\u1ea3",id:"m\xf4-t\u1ea3",level:3},{value:"Note*",id:"note",level:2}],c={toc:p},d="wrapper";function k(e){let{components:t,...n}=e;return(0,l.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"get-events"},"Get Events"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -L -X GET 'http://{{API_HOST}}/v1/event' \\\n-H 'Authorization: Bearer {{TOKEN}}'\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Response tr\u1ea3 v\u1ec1:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": [\n    {\n      "event_domain_uuid": "avavavav-1111-2222-3333-eeeeeeee",\n      "domain_uuid": "dddddddd-1111-2222-3333-eeeeeeee",\n      "domain_name": "test.tel4vn.com",\n      "event_name": "hangup",\n      "callback_url": "https://webhook.demo/",\n      "callback_apikey": "foo"\n    },\n    ...\n  ]\n}\n')),(0,l.kt)("p",null,"Tr\u1ea3 v\u1ec1 c\xe1c call events c\u1ee7a tenant."),(0,l.kt)("h3",{id:"http-request"},"HTTP Request"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET http://{{API_HOST}}/v1/event")),(0,l.kt)("h2",{id:"create-events"},"Create Events"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'curl -L -X POST \'http://{{API_HOST}}/v1/event\' \\\n-H \'Authorization: Bearer {{TOKEN}}\' \\\n-H \'Content-Type: application/json\' \\\n--data-raw \'{\n    "callback_url" : "https://webhook.demo/",\n    "callback_apikey" : "foo",\n    "event" : "create"\n}\'\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Response tr\u1ea3 v\u1ec1:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "created": true\n}\n')),(0,l.kt)("p",null,"T\u1ea1o Event Hook, m\u1ed7i l\u1ea7n b\u1eaft \u0111\u01b0\u1ee3c {event} t\u1ed5ng \u0111\xe0i s\u1ebd hook d\u1eef li\u1ec7u v\u1ec1 {callback_url}."),(0,l.kt)("h3",{id:"http-request-1"},"HTTP Request"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"POST http://{{API_HOST}}/v1/event")),(0,l.kt)("h3",{id:"body"},"Body"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"M\xf4 t\u1ea3"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"callback_url"),(0,l.kt)("td",{parentName:"tr",align:null},"Domain Url m\xe0 t\u1ed5ng \u0111\xe0i s\u1ebd hook d\u1eef li\u1ec7u t\u1edbi")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"callback_apikey"),(0,l.kt)("td",{parentName:"tr",align:null},"ApiKey ho\u1eb7c access token c\u1ee7a domain (optional)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"event"),(0,l.kt)("td",{parentName:"tr",align:null},"SIP Call Event")))),(0,l.kt)("h3",{id:"sip-call-event"},"SIP Call Event"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"M\xf4 t\u1ea3"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"hangup"),(0,l.kt)("td",{parentName:"tr",align:null},"S\u1ef1 ki\u1ec7n khi cu\u1ed9c g\u1ecdi b\u1ecb ng\u1eaft, hu\u1ef7")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ringing"),(0,l.kt)("td",{parentName:"tr",align:null},"S\u1ef1 ki\u1ec7n khi cu\u1ed9c g\u1ecdi \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"answered"),(0,l.kt)("td",{parentName:"tr",align:null},"S\u1ef1 ki\u1ec7n khi cu\u1ed9c g\u1ecdi \u0111\u01b0\u1ee3c nh\u1ea5c m\xe1y")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"cdr"),(0,l.kt)("td",{parentName:"tr",align:null},"S\u1ef1 ki\u1ec7n sau khi cdr \u0111\u01b0\u1ee3c t\u1ea1o xong")))),(0,l.kt)("admonition",{type:"warning"},(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},"N\u1ebfu b\u1ea1n t\u1ea1o event n\u1eb1m ngo\xe0i c\xe1c event \u1edf tr\xean, h\u1ec7 th\u1ed1ng s\u1ebd kh\xf4ng nh\u1eadn di\u1ec7n \u0111\u01b0\u1ee3c n\xean s\u1ebd kh\xf4ng hook data v\u1ec1."),(0,l.kt)("li",{parentName:"ul"},"N\u1ebfu b\u1ea1n c\u1ea7n hook event ngo\xe0i c\xe1c event \u1edf tr\xean, vui l\xf2ng g\u1eedi mail h\u1ed7 tr\u1ee3."))),(0,l.kt)("h2",{id:"delete-event"},"Delete Event"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"curl -L -X DELETE 'http://{{API_HOST}}/v1/event/eeeeeeee-1111-2222-3333-eeeeeeee' \\\n-H 'Authorization: Bearer {{TOKEN}}'\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Response tr\u1ea3 v\u1ec1:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "deleted": true\n}\n')),(0,l.kt)("p",null,"API d\xf9ng \u0111\u1ec3 xo\xe1 m\u1ed9t event_domain."),(0,l.kt)("h3",{id:"http-request-2"},"HTTP Request"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"DELETE http://{{API_HOST}}/v1/event/<ID>")),(0,l.kt)("h3",{id:"url-parameters"},"URL Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"M\xf4 t\u1ea3"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ID"),(0,l.kt)("td",{parentName:"tr",align:null},"ID c\u1ee7a event")))),(0,l.kt)("h2",{id:"event-hook-data"},"Event Hook Data"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Response tr\u1ea3 v\u1ec1:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "call_id": "avavavav-1111-2222-3333-eeeeeeee",\n  "sip_call_id": "dddddddd-1111-2222-3333-eeeeeeee",\n  "domain": "test.tel4vn.com",\n  "direction": "outbound",\n  "from_number": "0899888999",\n  "to_number": "101",\n  "hotline": "19001919",\n  "state": "hangup",\n  "duration": 10,\n  "billsec": 5,\n  "recording_url": "http://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623"\n}\n')),(0,l.kt)("h3",{id:"m\xf4-t\u1ea3"},"M\xf4 t\u1ea3"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,l.kt)("th",{parentName:"tr",align:null},"M\xf4 t\u1ea3"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"call_id"),(0,l.kt)("td",{parentName:"tr",align:null},"Id \u0111\u1ecbnh danh cu\u1ed9c g\u1ecdi")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sip_call_id"),(0,l.kt)("td",{parentName:"tr",align:null},"SIP Call Id")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"domain"),(0,l.kt)("td",{parentName:"tr",align:null},"Domain nh\u1eadn ho\u1eb7c th\u1ef1c hi\u1ec7n cu\u1ed9c g\u1ecdi")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"direction"),(0,l.kt)("td",{parentName:"tr",align:null},"H\u01b0\u1edbng cu\u1ed9c g\u1ecdi (inbound / outbound)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"from_number"),(0,l.kt)("td",{parentName:"tr",align:null},"S\u1ed1 g\u1ecdi. S\u1ebd l\xe0 s\u1ed1 ext n\u1ebfu cu\u1ed9c g\u1ecdi l\xe0 outbound")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"to_number"),(0,l.kt)("td",{parentName:"tr",align:null},"S\u1ed1 nh\u1eadn. S\u1ebd l\xe0 s\u1ed1 ext n\u1ebfu cu\u1ed9c g\u1ecdi l\xe0 inbound")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"hotline"),(0,l.kt)("td",{parentName:"tr",align:null},"\u0110\u1ea7u s\u1ed1 nh\u1eadn ho\u1eb7c th\u1ef1c hi\u1ec7n cu\u1ed9c g\u1ecdi")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"state"),(0,l.kt)("td",{parentName:"tr",align:null},"ringing / answered / hangup / cdr")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"duration"),(0,l.kt)("td",{parentName:"tr",align:null},"T\u1ed5ng th\u1eddi l\u01b0\u1ee3ng cu\u1ed9c g\u1ecdi. (Ri\xeang s\u1ef1 ki\u1ec7n hangup)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"billsec"),(0,l.kt)("td",{parentName:"tr",align:null},"Th\u1eddi l\u01b0\u1ee3ng t\xednh t\u1eeb khi hai b\xean k\u1ebft n\u1ed1i. (Ri\xeang s\u1ef1 ki\u1ec7n hangup)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"recording_url"),(0,l.kt)("td",{parentName:"tr",align:null},"URL public \u0111\u1ec3 play file ghi \xe2m. (Ri\xeang s\u1ef1 ki\u1ec7n cdr)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"status"),(0,l.kt)("td",{parentName:"tr",align:null},"Tr\u1ea1ng th\xe1i cu\u1ed9c g\u1ecdi. (Ri\xeang s\u1ef1 ki\u1ec7n cdr)")))),(0,l.kt)("h2",{id:"note"},"Note","*"),(0,l.kt)("p",null,"M\u1ed9t s\u1ed1 th\xf4ng tin c\u1ea7n l\u01b0u \xfd khi t\xedch h\u1ee3p event:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Event ringing, answered, hangup l\xe0 c\xe1c event theo lu\u1ed3ng c\u1ee7a m\u1ed9t cu\u1ed9c g\u1ecdi."),(0,l.kt)("li",{parentName:"ul"},"Event cdr l\xe0 event s\u1ebd g\u1eedi t\u1edbi webhook sau khi t\u1ed5ng \u0111\xe0i c\u1eadp nh\u1eadt CDR."),(0,l.kt)("li",{parentName:"ul"},"\u0110\u1ed1i v\u1edbi c\xe1c case outbound: call_id c\u1ee7a c\xe1c event s\u1ebd map gi\u1ed1ng nhau do t\u1ed3n t\u1ea1i tr\xean m\u1ed9t cu\u1ed9c g\u1ecdi."),(0,l.kt)("li",{parentName:"ul"},"\u0110\u1ed1I v\u1edbi c\xe1c case inbound:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Tr\u01b0\u1eddng h\u1ee3p 1 mobile - 1 extension: call_id c\u1ee7a c\xe1c event s\u1ebd map gi\u1ed1ng nhau do t\u1ed3n t\u1ea1i tr\xean m\u1ed9t cu\u1ed9c g\u1ecdi."),(0,l.kt)("li",{parentName:"ul"},"Tr\u01b0\u1eddng h\u1ee3p 1 mobile - nhi\u1ec1u extension (Ringing, Queue, IVR): call_id c\u1ee7a c\xe1c event ringing, answered, hangup s\u1ebd gi\u1ed1ng nhau. call_id c\u1ee7a event cdr s\u1ebd kh\xe1c nhau. Do call_id c\u1ee7a c\xe1c event ringing, answered, hangup l\xe0 call_id x\u1eed l\xfd c\u1ee7a cu\u1ed9c g\u1ecdi tr\xean t\u1eebng extension, call_id c\u1ee7a event cdr l\xe0 call_id c\u1ee7a c\u1ea3 m\u1ed9t lu\u1ed3ng inbound (Ringing, Queue, IVR).")))))}k.isMDXComponent=!0}}]);